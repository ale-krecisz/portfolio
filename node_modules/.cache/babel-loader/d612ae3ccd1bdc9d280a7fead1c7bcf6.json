{"ast":null,"code":"/**\n * @class\n * @memberof PIXI.glCore.shader\n * @param gl {WebGLRenderingContext} The current WebGL context {WebGLProgram}\n * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\n * @param fragmentSrc {string|string[]} The fragment shader source as an array of strings.\n * @param attributeLocations {Object} An attribute location map that lets you manually set the attribute locations\n * @return {WebGLProgram} the shader program\n */\nvar compileProgram = function (gl, vertexSrc, fragmentSrc, attributeLocations) {\n  var glVertShader = compileShader(gl, gl.VERTEX_SHADER, vertexSrc);\n  var glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\n  var program = gl.createProgram();\n  gl.attachShader(program, glVertShader);\n  gl.attachShader(program, glFragShader); // optionally, set the attributes manually for the program rather than letting WebGL decide..\n\n  if (attributeLocations) {\n    for (var i in attributeLocations) {\n      gl.bindAttribLocation(program, attributeLocations[i], i);\n    }\n  }\n\n  gl.linkProgram(program); // if linking fails, then log and cleanup\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    console.error('Pixi.js Error: Could not initialize shader.');\n    console.error('gl.VALIDATE_STATUS', gl.getProgramParameter(program, gl.VALIDATE_STATUS));\n    console.error('gl.getError()', gl.getError()); // if there is a program info log, log it\n\n    if (gl.getProgramInfoLog(program) !== '') {\n      console.warn('Pixi.js Warning: gl.getProgramInfoLog()', gl.getProgramInfoLog(program));\n    }\n\n    gl.deleteProgram(program);\n    program = null;\n  } // clean up some shaders\n\n\n  gl.deleteShader(glVertShader);\n  gl.deleteShader(glFragShader);\n  return program;\n};\n/**\n * @private\n * @param gl {WebGLRenderingContext} The current WebGL context {WebGLProgram}\n * @param type {Number} the type, can be either VERTEX_SHADER or FRAGMENT_SHADER\n * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\n * @return {WebGLShader} the shader\n */\n\n\nvar compileShader = function (gl, type, src) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log(gl.getShaderInfoLog(shader));\n    return null;\n  }\n\n  return shader;\n};\n\nmodule.exports = compileProgram;","map":null,"metadata":{},"sourceType":"script"}