{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.default = extractUniformsFromSrc;\n\nvar _pixiGlCore = require('pixi-gl-core');\n\nvar _pixiGlCore2 = _interopRequireDefault(_pixiGlCore);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar defaultValue = _pixiGlCore2.default.shader.defaultValue;\n\nfunction extractUniformsFromSrc(vertexSrc, fragmentSrc, mask) {\n  var vertUniforms = extractUniformsFromString(vertexSrc, mask);\n  var fragUniforms = extractUniformsFromString(fragmentSrc, mask);\n  return Object.assign(vertUniforms, fragUniforms);\n}\n\nfunction extractUniformsFromString(string) {\n  var maskRegex = new RegExp('^(projectionMatrix|uSampler|filterArea|filterClamp)$');\n  var uniforms = {};\n  var nameSplit = void 0; // clean the lines a little - remove extra spaces / tabs etc\n  // then split along ';'\n\n  var lines = string.replace(/\\s+/g, ' ').split(/\\s*;\\s*/); // loop through..\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i].trim();\n\n    if (line.indexOf('uniform') > -1) {\n      var splitLine = line.split(' ');\n      var type = splitLine[1];\n      var name = splitLine[2];\n      var size = 1;\n\n      if (name.indexOf('[') > -1) {\n        // array!\n        nameSplit = name.split(/\\[|]/);\n        name = nameSplit[0];\n        size *= Number(nameSplit[1]);\n      }\n\n      if (!name.match(maskRegex)) {\n        uniforms[name] = {\n          value: defaultValue(type, size),\n          name: name,\n          type: type\n        };\n      }\n    }\n  }\n\n  return uniforms;\n}","map":null,"metadata":{},"sourceType":"script"}