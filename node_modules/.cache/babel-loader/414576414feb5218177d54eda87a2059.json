{"ast":null,"code":"var _jsxFileName = \"/Users/michalkrecisz/Documents/projects/portfolio/src/components/Bunny.js\";\nimport React, { useRef } from 'react';\nimport { Stage, Container, Sprite, withPixiApp, render, PIXI } from '@inlet/react-pixi';\nconst image = \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/693612/IaUrttj.png\";\n\nconst Bunny = () => {\n  const inputEl = useRef(null); // VARS STORAGE //\n\n  var rt = [],\n      rts = [],\n      bgs = [],\n      containers = [],\n      channelsContainer = [],\n      displacementFilters = [],\n      brushes = [];\n  var brush, displacementFilter, bg; // CHANNEL FILTERS //\n\n  var redChannelFilter = new PIXI.filters.ColorMatrixFilter();\n  redChannelFilter.matrix = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0];\n  var greenChannelFilter = new PIXI.filters.ColorMatrixFilter();\n  greenChannelFilter.matrix = [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0];\n  var blueChannelFilter = new PIXI.filters.ColorMatrixFilter();\n  blueChannelFilter.matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];\n  channelsContainer.push(redChannelFilter, greenChannelFilter, blueChannelFilter); // APP //\n\n  var app = new PIXI.Application(500, 480, {\n    autoStart: false,\n    backgroundColor: 0x000000,\n    view: myCanvas\n  }); // CAPTURING CASHE //\n\n  for (var i = 0; i < 3; i++) {\n    rt.push(PIXI.RenderTexture.create(app.screen.width, app.screen.height));\n    rts.push(rt);\n  }\n\n  var current = 0; // CONTAINERS //\n\n  var containerRed = new PIXI.Container();\n  containerRed.position.x = 0;\n  var containerGreen = new PIXI.Container();\n  containerGreen.position.x = 0;\n  var containerBlue = new PIXI.Container();\n  containerBlue.position.x = 0;\n  containers.push(containerRed, containerGreen, containerBlue); // LOAD TEXTURES //\n\n  app.loader.add('bg', 'https://raw.githubusercontent.com/PavelLaptev/test-rep/master/grunge.jpg');\n  app.loader.add('one', 'https://raw.githubusercontent.com/PavelLaptev/test-rep/master/dis-varOne.png'); // LOADER //\n\n  app.loader.load(function (loader, resources) {\n    var tempBg = new PIXI.Sprite(resources.bg.texture);\n    tempBg.width = app.screen.width;\n    tempBg.height = app.screen.height;\n    app.renderer.render(tempBg, rt[0]);\n\n    for (var i = 0, len = containers.length; i < len; i++) {\n      app.stage.addChild(containers[i]);\n      brushes.push(new PIXI.Sprite(resources.one.texture));\n      displacementFilters.push(new PIXI.filters.DisplacementFilter(brushes[i]));\n      bg = new PIXI.Sprite(rts[0][0]);\n      bgs.push(bg);\n      containers[i].filters = [channelsContainer[i], displacementFilters[i]];\n      containers[i].addChild(bgs[i], brushes[i]);\n    }\n\n    brushes[0].anchor.set(0.5);\n    brushes[1].anchor.set(0.6);\n    brushes[2].anchor.set(0.4);\n    containers[1].filters[1].blendMode = PIXI.BLEND_MODES.ADD;\n    containers[2].filters[1].blendMode = PIXI.BLEND_MODES.ADD;\n    app.stage.interactive = true;\n    app.stage.on('pointermove', onPointerMove);\n    app.start();\n  });\n\n  function onPointerMove(event) {\n    const x = event.data.global.x;\n    const y = event.data.global.y;\n\n    for (var i = 0, len = containers.length; i < len; i++) {\n      displacementFilters[i].scale.x = Math.atan(x - brushes[i].x) * 50;\n      displacementFilters[i].scale.y = Math.atan(y - brushes[i].y) * 50;\n      brushes[i].position.copy(event.data.global);\n    }\n  }\n\n  render(React.createElement(\"canvas\", {\n    id: \"myCanvas\",\n    ref: inputEl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }));\n};\n\nexport default Bunny;","map":{"version":3,"sources":["/Users/michalkrecisz/Documents/projects/portfolio/src/components/Bunny.js"],"names":["React","useRef","Stage","Container","Sprite","withPixiApp","render","PIXI","image","Bunny","inputEl","rt","rts","bgs","containers","channelsContainer","displacementFilters","brushes","brush","displacementFilter","bg","redChannelFilter","filters","ColorMatrixFilter","matrix","greenChannelFilter","blueChannelFilter","push","app","Application","autoStart","backgroundColor","view","myCanvas","i","RenderTexture","create","screen","width","height","current","containerRed","position","x","containerGreen","containerBlue","loader","add","load","resources","tempBg","texture","renderer","len","length","stage","addChild","one","DisplacementFilter","anchor","set","blendMode","BLEND_MODES","ADD","interactive","on","onPointerMove","start","event","data","global","y","scale","Math","atan","copy"],"mappings":"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","sourcesContent":["import React, {useRef} from 'react'\nimport { Stage, Container, Sprite, withPixiApp, render, PIXI } from '@inlet/react-pixi'\n\n\nconst image = \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/693612/IaUrttj.png\";\n\n\nconst Bunny = () => {\n\n    const inputEl = useRef(null);\n\n\n// VARS STORAGE //\nvar rt = [], rts = [], bgs = [], containers = [], channelsContainer = [], displacementFilters = [], brushes = [];\nvar brush, displacementFilter, bg;\n\n// CHANNEL FILTERS //\nvar redChannelFilter = new PIXI.filters.ColorMatrixFilter();\nredChannelFilter.matrix = [\n  1, 0, 0, 0, 0, \n  0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, \n  0, 0, 0, 1, 0\n];\n\nvar greenChannelFilter = new PIXI.filters.ColorMatrixFilter();\ngreenChannelFilter.matrix = [\n  0, 0, 0, 0, 0, \n  0, 1, 0, 0, 0, \n  0, 0, 0, 0, 0, \n  0, 0, 0, 1, 0\n];\n\nvar blueChannelFilter = new PIXI.filters.ColorMatrixFilter();\nblueChannelFilter.matrix = [\n  0, 0, 0, 0, 0, \n  0, 0, 0, 0, 0, \n  0, 0, 1, 0, 0, \n  0, 0, 0, 1, 0\n];\n\nchannelsContainer.push(redChannelFilter,greenChannelFilter,blueChannelFilter);\n\n// APP //\nvar app = new PIXI.Application(500, 480, {\n  autoStart: false, \n  backgroundColor: 0x000000, \n  view: myCanvas\n});\n\n// CAPTURING CASHE //\nfor (var i=0;i<3;i++) {\n  rt.push(PIXI.RenderTexture.create(app.screen.width, app.screen.height));\n  rts.push(rt);\n}\nvar current = 0;\n\n// CONTAINERS //\nvar containerRed = new PIXI.Container();\n    containerRed.position.x = 0;\nvar containerGreen = new PIXI.Container();\n    containerGreen.position.x = 0;\nvar containerBlue = new PIXI.Container();\n    containerBlue.position.x = 0;\ncontainers.push(containerRed, containerGreen, containerBlue);\n\n// LOAD TEXTURES //\napp.loader.add('bg', 'https://raw.githubusercontent.com/PavelLaptev/test-rep/master/grunge.jpg');\napp.loader.add('one', 'https://raw.githubusercontent.com/PavelLaptev/test-rep/master/dis-varOne.png');\n\n// LOADER //\napp.loader.load(function(loader, resources) {\n  var tempBg = new PIXI.Sprite(resources.bg.texture);\n      tempBg.width = app.screen.width;\n      tempBg.height = app.screen.height;\n\n  app.renderer.render(tempBg, rt[0]);\n  \n  for (var i=0, len=containers.length; i<len; i++) {\n    app.stage.addChild(containers[i]);\n    brushes.push(new PIXI.Sprite(resources.one.texture));\n    displacementFilters.push(new PIXI.filters.DisplacementFilter(brushes[i]));\n    \n    bg = new PIXI.Sprite(rts[0][0]);\n    bgs.push(bg);\n    containers[i].filters = [channelsContainer[i],displacementFilters[i]];\n    containers[i].addChild(bgs[i],brushes[i]); \n  }\n \n  brushes[0].anchor.set(0.5); brushes[1].anchor.set(0.6); brushes[2].anchor.set(0.4); \n  containers[1].filters[1].blendMode = PIXI.BLEND_MODES.ADD;\n  containers[2].filters[1].blendMode = PIXI.BLEND_MODES.ADD;\n\n  app.stage.interactive = true;\n  app.stage.on('pointermove', onPointerMove);\n  app.start();\n});\n\n \nfunction onPointerMove(event) {\n  const x = event.data.global.x;\n  const y = event.data.global.y;\n  \n  for (var i=0, len=containers.length; i<len; i++) {\n    displacementFilters[i].scale.x = Math.atan(x - brushes[i].x)*50; \n    displacementFilters[i].scale.y = Math.atan(y - brushes[i].y)*50;\n\n    brushes[i].position.copy(event.data.global);\n  }\n}\n\n    render(\n        <canvas id='myCanvas' ref={inputEl}/>\n    )\n};\n\nexport default Bunny;"]},"metadata":{},"sourceType":"module"}