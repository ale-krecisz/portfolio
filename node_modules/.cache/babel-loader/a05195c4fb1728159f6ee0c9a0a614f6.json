{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _pixiGlCore = require('pixi-gl-core');\n\nvar _pixiGlCore2 = _interopRequireDefault(_pixiGlCore);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n/**\n * An object containing WebGL specific properties to be used by the WebGL renderer\n *\n * @class\n * @private\n * @memberof PIXI\n */\n\n\nvar WebGLGraphicsData = function () {\n  /**\n   * @param {WebGLRenderingContext} gl - The current WebGL drawing context\n   * @param {PIXI.Shader} shader - The shader\n   * @param {object} attribsState - The state for the VAO\n   */\n  function WebGLGraphicsData(gl, shader, attribsState) {\n    _classCallCheck(this, WebGLGraphicsData);\n    /**\n     * The current WebGL drawing context\n     *\n     * @member {WebGLRenderingContext}\n     */\n\n\n    this.gl = gl; // TODO does this need to be split before uploading??\n\n    /**\n     * An array of color components (r,g,b)\n     * @member {number[]}\n     */\n\n    this.color = [0, 0, 0]; // color split!\n\n    /**\n     * An array of points to draw\n     * @member {PIXI.Point[]}\n     */\n\n    this.points = [];\n    /**\n     * The indices of the vertices\n     * @member {number[]}\n     */\n\n    this.indices = [];\n    /**\n     * The main buffer\n     * @member {WebGLBuffer}\n     */\n\n    this.buffer = _pixiGlCore2.default.GLBuffer.createVertexBuffer(gl);\n    /**\n     * The index buffer\n     * @member {WebGLBuffer}\n     */\n\n    this.indexBuffer = _pixiGlCore2.default.GLBuffer.createIndexBuffer(gl);\n    /**\n     * Whether this graphics is dirty or not\n     * @member {boolean}\n     */\n\n    this.dirty = true;\n    /**\n     * Whether this graphics is nativeLines or not\n     * @member {boolean}\n     */\n\n    this.nativeLines = false;\n    this.glPoints = null;\n    this.glIndices = null;\n    /**\n     *\n     * @member {PIXI.Shader}\n     */\n\n    this.shader = shader;\n    this.vao = new _pixiGlCore2.default.VertexArrayObject(gl, attribsState).addIndex(this.indexBuffer).addAttribute(this.buffer, shader.attributes.aVertexPosition, gl.FLOAT, false, 4 * 6, 0).addAttribute(this.buffer, shader.attributes.aColor, gl.FLOAT, false, 4 * 6, 2 * 4);\n  }\n  /**\n   * Resets the vertices and the indices\n   */\n\n\n  WebGLGraphicsData.prototype.reset = function reset() {\n    this.points.length = 0;\n    this.indices.length = 0;\n  };\n  /**\n   * Binds the buffers and uploads the data\n   */\n\n\n  WebGLGraphicsData.prototype.upload = function upload() {\n    this.glPoints = new Float32Array(this.points);\n    this.buffer.upload(this.glPoints);\n    this.glIndices = new Uint16Array(this.indices);\n    this.indexBuffer.upload(this.glIndices);\n    this.dirty = false;\n  };\n  /**\n   * Empties all the data\n   */\n\n\n  WebGLGraphicsData.prototype.destroy = function destroy() {\n    this.color = null;\n    this.points = null;\n    this.indices = null;\n    this.vao.destroy();\n    this.buffer.destroy();\n    this.indexBuffer.destroy();\n    this.gl = null;\n    this.buffer = null;\n    this.indexBuffer = null;\n    this.glPoints = null;\n    this.glIndices = null;\n  };\n\n  return WebGLGraphicsData;\n}();\n\nexports.default = WebGLGraphicsData;","map":null,"metadata":{},"sourceType":"script"}